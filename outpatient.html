<!DOCTYPEÂ html>
<html>

<head>
    <title>
        Outpatient Audit Form
    </title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js"
        integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/" crossorigin="anonymous">
    </script>
</head>

<style>
    h2 {
        font-size: 1.17em;
        font-weight: bolder;
        display: inline;
    }

    .h2-label {
        float: right;
        font-size: 1.17em;
        font-weight: bolder;
        display: inline;
    }

    h3 {
        font-size: 1.10em;
        font-weight: bolder;
    }

    .cat_1_text {
        color: #00BFFF;
        text-decoration: underline;
    }

    .cat_2_text {
        color: green;
        text-decoration: underline;
    }

    .cat_3_text {
        color: red;
        text-decoration: underline;
    }

    .red_word {
        color: red;
    }
</style>

<body>
    <!-- MOVED THIS BLOCK FROM THE BOTTOM TO THE TOP OF THE DOCUMENT, SEMANTICALLY THIS SHOULDN'T BE PLACED AT THE BOTTOM OF THE DOCUMENT IF YOU'RE GOING TO COERCE IT TO THE TOP OF THE LAYOUT ANYWAY -->
    <!-- MADE THIS AREA STICKY/FIXED -->
    <div class="fixed-top bg-light">
        <!-- NOTE - BOOTSTRAP LAYOUT PATTERNS - (container -> row -> child columns all equal 12 and wrap after) -->
        <div class="container">
            <div class="row py-2 align-items-center">
                <div id="overallLevel" class="col-11 text-end">
                </div>
                <div class="col-1 text-end">
                    <button class="btn btn-primary align-items-center" type="button" onclick="clear_form()"> Clear </button>
                </div>
            </div>
        </div>
    </div>
    <div class="d-flex flex-column">
        <!-- START FIRST CONTAINER AND ACCORDION -->
        <!-- NOTE - FOR THIS UI IT'S BETTER TO GIVE EACH SECTION ITS OWN CONTAINER AND ACCORDION -->
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <!-- NOTE - mt-5 / pt-5 are used to space content so the sticky top doesn't initially overlap this area, basically padding-top and margin-top -->
                    <div class="accordion m-auto order-2 mt-5 pt-5" id="accordion-full">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#accordion-problems-collapse" aria-expanded="true"
                                    aria-controls="accordion-problems-collapse">
                                    Number and Complexity of Problems Addressed
                                </button>
                            </h2>
                            <div class="problems">
                                <div class="container" id="problems_div" onchange="select_level('problem')">
                                    <!-- LEVEL SELECT -->
                                    <div class="row py-2 d-flex align-items-center" id="accordion-problems-header">
                                        <!-- COL-7 (from COL-8) - to make room for the clear button -->
                                        <div class="col-7 text-end">
                                            <strong>Level</strong>
                                        </div>
                                        <div class="col-1">
                                            <!-- NOTE - BOOTSTRAP WRAPPER CLASSES AND FORM CLASSES -->
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="problem_level-2" name="problem_level"
                                                    value=2>
                                                <label class="form-check-label" for="problem_level-2">2</label>
                                            </div>
                                        </div>
                                        <div class="col-1">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="problem_level-3" name="problem_level"
                                                    value=3>
                                                <label class="form-check-label" for="problem_level-3">3</label>
                                            </div>
                                        </div>
                                        <div class="col-1">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="problem_level-4" name="problem_level"
                                                    value=4>
                                                <label class="form-check-label" for="problem_level-4">4</label>
                                            </div>
                                        </div>
                                        <div class="col-1">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" id="problem_level-5" name="problem_level"
                                                    value=5>
                                                <label class="form-check-label" for="problem_level-5">5</label>
                                            </div>
                                        </div>
                                        <!-- ADDED CLEAR BUTTON AFTER LEVELS -->
                                        <div class="col-1">
                                            <button class="btn btn-primary btn-sm" type="button"
                                    onclick="clear_section('problems')">Clear</button>
                                        </div>
                                    </div>
                                    <!-- BODY / MEAT OF ACCORDION -->
                                    <div id="accordion-problems-collapse" class="accordion-collapse collapse show"
                                        aria-labelledby="accordion-problems-header">
                                        <div class="accordion-body">
                                            <!-- NOTE - ADDED SELECTIVE BORDER CLASSES FOR SUBTLE SEPARATION OF LINES -->
                                            <div class="row border border-top-0 border-start-0 border-end-0 border-light">
                                                <div class="col-7">Self-limited or Minor</div>
                                                <div class="col-1">
                                                    <!-- NOTE - BOOTSTRAP WRAPPER CLASSES AND FORM CLASSES -->
                                                    <div class="form-check">

                                                        <input class="form-check-input" type="checkbox" id="self-limited_1" name="problem"
                                                            value=2 onchange="one_per_row('self-limited_1', 'problem')">
                                                        <label class="form-check-label" for="self-limited_1">1</label>
                                                    </div>
                                                </div>
                                                <div class="col-1">
                                                    <div class="form-check">

                                                        <input class="form-check-input" type="checkbox" id="self-limited_2" name="problem"
                                                            value=3 onchange="one_per_row('self-limited_2', 'problem')">
                                                        <label class="form-check-label" for="self-limited_2">2+</label>
                                                    </div>
                                                </div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                            </div>
                                            <div class="row border border-top-0 border-start-0 border-end-0 border-light">
                                                <div class="col-7">Stable Chronic Illness(= at treatment goal)</div>
                                                <div class="col-1"></div>
                                                <div class="col-1">
                                                    <div class="form-check">

                                                        <input class="form-check-input" type="checkbox" id="stable-chronic_1"
                                                            name="problem" value=3
                                                            onchange="one_per_row('stable-chronic_1', 'problem')">
                                                        <label class="form-check-label" for="stable-chronic_1">1</label>
                                                    </div>
                                                </div>
                                                <div class="col-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="stable-chronic_2"
                                                            name="problem" value=4
                                                            onchange="one_per_row('stable-chronic_2', 'problem')">
                                                        <label class="form-check-label" for="stable-chronic_2">2+</label>
                                                    </div>
                                                </div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                            </div>
                                            <div class="row border border-top-0 border-start-0 border-end-0 border-light">
                                                <div class="col-7">Acute, Uncomplicated Illness or Injury</div>
                                                <div class="col-1"></div>
                                                <div class="col-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="acute-uncomplicated_1"
                                                            name="problem" value=3>
                                                        <label class="form-check-label" for="acute-uncomplicated_1">1+</label>
                                                    </div>
                                                </div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                            </div>
                                            <div class="row border border-top-0 border-start-0 border-end-0 border-light">
                                                <div class="col-7">Chronic w/Exacerbation/progression/side effects</div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="chronic-exacerbation_1"
                                                            name="problem" value=4>
                                                        <label class="form-check-label" for="chronic-exacerbation_1">1+</label>
                                                    </div>
                                                </div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                            </div>
                                            <div class="row border border-top-0 border-start-0 border-end-0 border-light">
                                                <div class="col-7">Undiagnosed New Problem w/ Uncertain Prognosis</div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="undiagnosed_1" name="problem"
                                                            value=4>
                                                        <label class="form-check-label" for="chronic-exacerbation_1">1+</label>
                                                    </div>
                                                </div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                            </div>
                                            <div class="row border border-top-0 border-start-0 border-end-0 border-light">
                                                <div class="col-7">Acute Illness w/ Systemic Symptoms</div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="acute-illness_1"
                                                            name="problem" value=4>
                                                        <label class="form-check-label" for="acute-illness_1">1+</label>
                                                    </div>
                                                </div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                            </div>
                                            <div class="row border border-top-0 border-start-0 border-end-0 border-light">
                                                <div class="col-7">Chronic w/ Severe Exacerbation/progression/side effects
                                                </div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="chronic-severe_1"
                                                            name="problem" value=5>
                                                        <label class="form-check-label" for="acute-illness_1">1+</label>
                                                    </div>
                                                </div>
                                                <div class="col-1"></div>
                                            </div>
                                            <div class="row">
                                                <div class="col-7">Acute or Chronic Illness/injury threat to life/bodily
                                                    function
                                                </div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1"></div>
                                                <div class="col-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="acute-chronic_1"
                                                            name="problem" value=5>
                                                        <label class="form-check-label" for="acute-chronic_1">1+</label>
                                                    </div>
                                                </div>
                                                <div class="col-1"></div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <script>
                                let problems_array = [];
                                $(".problems").find(":checkbox").each(function () {
                                    problems_array.push($(this));
                                })
                            </script>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        <!-- END FIRST CONTAINER AND ACCORDION -->


        <!-- TODO: USE PATTERNS FROM THE FIRST CONTAINER TO BREAK OUT THE OTHER 2 SECTIONS INTO THEIR OWN CONTAINERS / ACCORDIONS, APPLY BOOTSTRAPPY FORM CLASSES AND STRUCTURE PATTERNS -->
        <div class="accordion m-auto order-2 mt-5" id="accordion-full">

            <div class="accordion-item">
                <div class="risk">
                    <div class="container" id="risk_div" onchange="select_level('risk')">
                        <div class="row" class="accordion-header" id="accordion-risk-header">
                            <div class="col-8">
                                <h2>Risk</h2> <button class="btn btn-primary btn-sm" type="button"
                                    onclick="clear_section('risk')"> Clear</button><span class="h2-label">Level</span>
                            </div>
                            <div class="col-1"><input type="radio" id="risk_level-2" name="risk_level" value=2> <label
                                    for="risk_level-2">2</label></div>

                            <div class="col-1"><input type="radio" id="risk_level-3" name="risk_level" value=3> <label
                                    for="risk_level-3">3</label></div>

                            <div class="col-1"><input type="radio" id="risk_level-4" name="risk_level" value=4> <label
                                    for="risk_level-4">4</label></div>

                            <div class="col-1"><input type="radio" id="risk_level-5" name="risk_level" value=5> <label
                                    for="risk_level-5">5</label></div>

                        </div>
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#accordion-risk-collapse" aria-expanded="true"
                            aria-controls="accordion-risk-collapse">
                        </button>
                        <div id="accordion-risk-collapse" class="accordion-collapse collapse show"
                            aria-labelledby="accordion-risk-header">
                            <div class="accordion-body">
                                <div class="row">
                                    <div class="col-8">Minimal risk of recurrences morbidity from additional
                                        diagnostic
                                        testing or
                                        treatment
                                    </div>
                                    <div class="col-1"><input type="checkbox" id="minimal-risk" name="risk" value=2>
                                    </div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                </div>
                                <div class="row">
                                    <div class="col-8">Low risk of mordbidity from additional diagnostic testing or
                                        treatment
                                        <!-- NOTE - We may not want an accordion in an accordion for these, but it may be easier to make that call when the parent UI gets cleaned up -->
                                        <!-- Maybe we consider making our own UX where when you check the parent line-item, the respective examples expand into view under it? I'm not sure if that's an acceptable way to display it, but we should think about this -->
                                        <div class="accordion" id="accordion-low-morbidity">
                                            <!-- NOTE - There a few sub-sections like this one in the last two sections that contain selection UI, 
                                            lets play with cleaning those up so the form elements (checks and radios) all line up 
                                            and there are neat stacks of selectable items. Right now the jumbles seem over-complicated but only
                                            (probably) because they're not that organized. -->

                                            <div class="accordion-item">
                                                <h6 class="accordion-header" id="accordion-low-morbidity-header">
                                                    <button class="accordion-button" type="button"
                                                        data-bs-toggle="collapse"
                                                        data-bs-target="#accordion-low-morbidity-collapse"
                                                        aria-expanded="true"
                                                        aria-controls="accordion-low-morbidity-collapse">
                                                        Low Morbidity Examples
                                                    </button>
                                                </h6>
                                                <div id="accordion-low-morbidity-collapse"
                                                    class="accordion-collapse collapse show"
                                                    aria-labelledby="accordion-low-morbidity-header">
                                                    <div class="accordion-body">
                                                        <div class="container" id="t1" onchange="get_level('low-risk')">
                                                            <div class="row">
                                                                <div class="col-4"><input type="checkbox"
                                                                        id="over-the-counter" name="low-risk"
                                                                        value=3>Over-the-counter drugs</div>
                                                                <div class="col-4"><input type="checkbox"
                                                                        id="minor-surgery" name="low-risk" value=3>Minor
                                                                    surgery w/o riskfactors</div>
                                                                <div class="col-4"><input type="checkbox"
                                                                        id="low-recurrences" name="low-risk" value=3>Low
                                                                    recurrences</div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="Physical/Occupational" name="low-risk"
                                                                        value=3>Physical/Occupational Therapy</div>
                                                                <div class="col-6"><input type="checkbox" id="IV-fluids"
                                                                        name="low-risk" value=3>IV
                                                                    fluids
                                                                    without additives</div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-4"><input type="checkbox" id="low-other"
                                                                        name="low-risk" value=3>Other</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-1"></div>
                                    <div class="col-1"><input type="checkbox" id="low-risk" name="risk" value=3>
                                    </div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                </div>
                                <div class="row">
                                    <div class="col-8">Moderate risk of morbidity from additional diagnostic testing
                                        or
                                        treatment
                                        <div class="accordion" id="accordion-moderate-mordbidity">
                                            <div class="accordion-item">
                                                <h6 class="accordion-header" id="accordion-moderate-morbidity-header">
                                                    <button class="accordion-button" type="button"
                                                        data-bs-toggle="collapse"
                                                        data-bs-target="#accordion-moderate-morbidity-collapse"
                                                        aria-expanded="true"
                                                        aria-controls="accordion-moderate-morbidity-collapse">
                                                        Moderate Morbidity Examples
                                                    </button>
                                                </h6>
                                                <div id="accordion-moderate-morbidity-collapse"
                                                    class="accordion-collapse collapse show"
                                                    aria-labelledby="accordion-moderate-morbidity-header">
                                                    <div class="accordion-body">
                                                        <div class="container" id="t2"
                                                            onchange="get_level('moderate-risk')">
                                                            <div class="row">
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="RX-minor-surgery" name="moderate-risk"
                                                                        value=4>RX Minor surgery w/o risk
                                                                    factors
                                                                </div>
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="Elective-major-surgery" name="moderate-risk"
                                                                        value=4>Elective major surgery w/o risk
                                                                    factors</div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="Diagnosis/treatment" name="moderate-risk"
                                                                        value=4>Diagnosis/treatment
                                                                    significantly
                                                                    limited by social determinants of
                                                                    health
                                                                </div>
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="moderate-risk-recurrence"
                                                                        name="moderate-risk" value=4>Moderate risk of
                                                                    recurrence</div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="IV-with-additives" name="moderate-risk"
                                                                        value=4>IV with additives (Fe infusion)
                                                                </div>
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="moderate-other" name="moderate-risk"
                                                                        value=4>Other</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"><input type="checkbox" id="moderate-risk" name="risk" value=4>
                                    </div>
                                    <div class="col-1"></div>
                                </div>
                                <div class="row">
                                    <div class="col-8">High risk of mordbidity from additional diagnostic testing or
                                        treatment
                                        <div class="accordion" id="accordion-high-mordbidity">
                                            <div class="accordion-item">
                                                <h6 class="accordion-header" id="accordion-high-morbidity-header">
                                                    <button class="accordion-button" type="button"
                                                        data-bs-toggle="collapse"
                                                        data-bs-target="#accordion-high-morbidity-collapse"
                                                        aria-expanded="true"
                                                        aria-controls="accordion-high-morbidity-collapse">
                                                        High Morbidity Examples
                                                    </button>
                                                </h6>
                                                <div id="accordion-high-morbidity-collapse"
                                                    class="accordion-collapse collapse show"
                                                    aria-labelledby="accordion-high-morbidity-header">
                                                    <div class="accordion-body">
                                                        <div class="container" id="t3"
                                                            onchange="get_level('high-risk')">
                                                            <div class="row">
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="drug-therapy" name="high-risk" value=5>Drug
                                                                    Therapy intensive monitoring for toxicity</div>
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="major_surgery_risks" name="high-risk"
                                                                        value=5>Major surgery w/ risk factors</div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="hospitalization" name="high-risk"
                                                                        value=5>Hospitalization</div>
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="de-escalate" name="high-risk"
                                                                        value=5>De-escalate care/poor prognosis
                                                                    (example hospice)</div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="high-risk-recurrence" name="high-risk"
                                                                        value=5>High risk of recurrence</div>
                                                                <div class="col-6"><input type="checkbox"
                                                                        id="high-other" name="high-risk" value=5>Other
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"><input type="checkbox" id="high-risk" name="risk" value=5>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <div class="data">
                    <div class="container" id="data_div" onchange="select_level('data')">
                        <div class="row" class="accordion-header" id="accordion-data-header">
                            <div class="col-8">
                                <h2>Data</h2><button class="btn btn-primary btn-sm" type="button"
                                    onclick="clear_section('data')"> Clear</button><span class="h2-label">Level</span>
                            </div>
                            <div class="col-1"><input type="radio" id="data_level-2" name="data_level" value=2> <label
                                    for="data_level-2">2</label>
                            </div>

                            <div class="col-1"><input type="radio" id="data_level-3" name="data_level" value=3> <label
                                    for="data_level-3">3</label>
                            </div>

                            <div class="col-1"><input type="radio" id="data_level-4" name="data_level" value=4> <label
                                    for="data_level-4">4</label>
                            </div>

                            <div class="col-1"><input type="radio" id="data_level-5" name="data_level" value=5> <label
                                    for="data_level-5">5</label>
                            </div>

                        </div>
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#accordion-data-collapse" aria-expanded="true"
                            aria-controls="accordion-data-collapse">
                        </button>
                        <div id="accordion-data-collapse" class="accordion-collapse collapse show"
                            aria-labelledby="accordion-data-header">
                            <div class="accordion-body">
                                <div class="accordion m-2" id="accordion-categories">
                                    <div class="accordion-item">
                                        <h6 class="accordion-categories-header" id="accordion-categories-header">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#accordion-categories-collapse" aria-expanded="true"
                                                aria-controls="accordion-categories-collapse">
                                                Category Criterea Examples
                                            </button>
                                        </h6>
                                        <div id="accordion-categories-collapse" class="accordion-collapse collapse show"
                                            aria-labelledby="accordion-categories-header"
                                            data-bs-parent="#accordion-categories">
                                            <div class="accordion-body">
                                                <div class="category1">
                                                    <div class="container" id="t4" onchange='category_level()'>
                                                        <div class="row">
                                                            <div class="col-12 cat_1_text">
                                                                Category
                                                                1:
                                                                Tests,
                                                                documents, or
                                                                independent historian(s)</div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <input type="checkbox" id="review_prior_1"
                                                                    name="category1" value=1
                                                                    onchange="one_per_row('review_prior_1', 'category')">
                                                                <label for="review_prior_1">1</label>
                                                                <input type="checkbox" id="review_prior_2"
                                                                    name="category1" value=2
                                                                    onchange="one_per_row('review_prior_2', 'category')">
                                                                <label for="review_prior_2">2</label>
                                                                <input type="checkbox" id="review_prior_3"
                                                                    name="category1" value=3
                                                                    onchange="one_per_row('review_prior_3', 'category')">
                                                                <label for="review_prior_3">3+</label>
                                                                Review of
                                                                prior
                                                                external note(s) from each
                                                                <span class="red_word">unique</span> source (not your
                                                                own
                                                                notes)
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12"><input type="checkbox"
                                                                    id="review_results_1" name="category1" value=1
                                                                    onchange="one_per_row('review_results_1', 'category')">
                                                                <label for="review_results_1">1</label>
                                                                <input type="checkbox" id="review_results_2"
                                                                    name="category1" value=2
                                                                    onchange="one_per_row('review_results_2', 'category')">
                                                                <label for="review_results_2">2</label>
                                                                <input type="checkbox" id="review_results_3"
                                                                    name="category1" value=3
                                                                    onchange="one_per_row('review_results_3', 'category')">
                                                                <label for="review_results_3">3+</label>
                                                                Review of the result(s) of each
                                                                <span class="red_word">unique</span> test (Not
                                                                previously
                                                                used
                                                                in
                                                                prior
                                                                visit(s))
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12"><input type="checkbox" id="ordering_1"
                                                                    name="category1" value=1
                                                                    onchange="one_per_row('ordering_1', 'category')">
                                                                <label for="ordering_1">1</label>
                                                                <input type="checkbox" id="ordering_2" name="category1"
                                                                    value=2
                                                                    onchange="one_per_row('ordering_2', 'category')">
                                                                <label for="ordering_2">2</label>
                                                                <input type="checkbox" id="ordering_3" name="category1"
                                                                    value=3
                                                                    onchange="one_per_row('ordering_3', 'category')">
                                                                <label for="ordering_3">3+</label>
                                                                Ordering
                                                                of each
                                                                <span class="red_word">unique</span> test
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12"><input type="checkbox" id="assesment"
                                                                    name="category1" value=1>
                                                                Assesment
                                                                requiring an independent historian(s)</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="category2" onchange='category_level()'>
                                                    <div class="container" id="t5">
                                                        <div class="row">
                                                            <div class="col-12 cat_2_text">
                                                                Category
                                                                2:
                                                                Independent
                                                                interpretation of tests</div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12"><input type="checkbox"
                                                                    id="independent_interpretation" name="category2"
                                                                    value=1>
                                                                Independent interpretation of a test performed by
                                                                another
                                                                physician/other qualified healthcare proffessional (not
                                                                separately
                                                                reported)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="category3" onchange='category_level()'>
                                                    <div class="container" id="t6">
                                                        <div class="row">
                                                            <div class="col-12 cat_3_text">
                                                                Category
                                                                3:
                                                                Disscussion of
                                                                management or test interpretation</div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12"><input type="checkbox"
                                                                    id="disscussion_management" name="category3"
                                                                    value=1>
                                                                Disscussion of management or test interpretation with
                                                                external
                                                                physician/other qualified health care
                                                                professional/appropriate source
                                                                (not seperately reported)</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8">0 - 1</div>
                                    <div class="col-1"><input type="checkbox" id="0-1" name="data" value=2></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                </div>
                                <div class="row">
                                    <div class="col-8" onchange="get_level('category_a')"><a href="#" class="link-info"
                                            data-bs-toggle="collapse" data-bs-target="#accordion-categories-collapse"
                                            aria-expanded="true" aria-controls="accordion-categories-collapse">Category
                                            1:</a>
                                        <span class="red_word"> 2 </span><input type="radio" id="level3_cat1"
                                            name="category_a" value=3>
                                        Or Independent Historian(s) <input type="radio" id="indep_hist"
                                            name="category_a" value=3>
                                    </div>
                                    <div class="col-1"></div>
                                    <div class="col-1"><input type="checkbox" id="category_a" name="data" value=3>
                                    </div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                </div>
                                <div class="row">
                                    <div class="col-8" onchange="get_level('category_b')"><a href="#" class="link-info"
                                            data-bs-toggle="collapse" data-bs-target="#accordion-categories-collapse"
                                            aria-expanded="true" aria-controls="accordion-categories-collapse">Category
                                            1:</a><span class="red_word"> 3 </span><input type="radio" id="level4_cat1"
                                            name="category_b" value=4> Or <a href="#" class="link-success"
                                            data-bs-toggle="collapse" data-bs-target="#accordion-categories-collapse"
                                            aria-expanded="true" aria-controls="accordion-categories-collapse">Category
                                            2:</a><span class="red_word"> 1
                                        </span><input type="radio" id="level4_cat2" name="category_b" value=4>
                                        Or <a href="#" class="link-danger" data-bs-toggle="collapse"
                                            data-bs-target="#accordion-categories-collapse" aria-expanded="true"
                                            aria-controls="accordion-categories-collapse">Category 3:</a><span
                                            class="red_word"> 1 </span><input type="radio" id="level4_cat3"
                                            name="category_b" value=4></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"><input type="checkbox" id="category_b" name="data" value=4>
                                    </div>
                                    <div class="col-1"></div>
                                </div>
                                <div class="row">
                                    <div class="col-8" onchange="get_level('category_c')">Must Meet 2 of 3
                                        Below:<br>
                                        <a href="#" class="link-info" data-bs-toggle="collapse"
                                            data-bs-target="#accordion-categories-collapse" aria-expanded="true"
                                            aria-controls="accordion-categories-collapse">Category
                                            1:</a><span class="red_word"> 3
                                        </span><input type="checkbox" id="level5_cat1" name="category_c" value=5>
                                        <a href="#" class="link-success" data-bs-toggle="collapse"
                                            data-bs-target="#accordion-categories-collapse" aria-expanded="true"
                                            aria-controls="accordion-categories-collapse">Category 2:</a><span
                                            class="red_word"> 1 </span><input type="checkbox" id="level5_cat2"
                                            name="category_c" value=5> <a href="#" class="link-danger"
                                            data-bs-toggle="collapse" data-bs-target="#accordion-categories-collapse"
                                            aria-expanded="true" aria-controls="accordion-categories-collapse">Category
                                            3:</a><span class="red_word"> 1 </span><input type="checkbox"
                                            id="level5_cat3" name="category_c" value=5>
                                    </div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"></div>
                                    <div class="col-1"><input type="checkbox" id="category_c" name="data" value=5>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</body>
<script>
    function select_level(name) {
        let level = name + '_level';
        const checkboxes = document.querySelectorAll('input[name="' + name + '"]:checked');
        let max = 0;
        checkboxes.forEach((checkbox) => {
            if (parseInt(checkbox.value) > max) {
                max = parseInt(checkbox.value)
            }
        });
        const levels = document.querySelectorAll('input[name="' + level + '"]');
        levels.forEach((level) => {
            if (parseInt(level.value) == max) {
                level.checked = true
            }
        });
        overall_level();
    }

    function get_level(name) {
        const checkboxes = document.querySelectorAll('input[name="' + name + '"]:checked');
        if (name == 'category_c') {
            let cat_c = document.querySelectorAll('input[name="category_c"]:checked');
            if (cat_c.length < 2) {
                $("#category_c").prop('checked', false);
            } else {
                document.getElementById(name).checked = true;
            }
        } else if (checkboxes.length > 0) {
            document.getElementById(name).checked = true;
        } else {
            document.getElementById(name).checked = false;
        }

    }

    function one_per_row(id, name) {
        $(document).ready(
            function () {
                let search = "#" + id;
                let row = $(search).parent().parent().find('input:checkbox');
                row.each(function () {
                    if ($(this).attr("id") != id) {
                        $(this).prop('checked', false)
                    }
                });
                if (name == 'category') {
                    category_level();
                } else {
                    select_level(name);
                }
            }
        )
    }

    function category_level() {
        let category_1 = 0;
        let cat1 = document.querySelectorAll('input[name="category1"]:checked');
        cat1.forEach((checkbox) => {
            category_1 += parseInt(checkbox.value)
        });
        let cat2 = document.querySelectorAll('input[name="category2"]:checked').length;
        let cat3 = document.querySelectorAll('input[name="category3"]:checked').length;
        let ind_hist = document.getElementById("assesment").checked;
        if (category_1 < 2 && !ind_hist && cat2 == 0 && cat3 == 0) {
            $("#0-1").prop("checked", true);
            document.querySelectorAll('input[name="category_a"]:checked').forEach((checkbox) => {
                checkbox.checked = false
            });
            document.querySelectorAll('input[name="category_b"]:checked').forEach((checkbox) => {
                checkbox.checked = false
            });
            document.querySelectorAll('input[name="category_c"]:checked').forEach((checkbox) => {
                checkbox.checked = false
            });
        } else {
            $("#0-1").prop("checked", false);
            if (category_1 < 2) {
                $("#level3_cat1").prop("checked", false);
                $("#level4_cat1").prop("checked", false);
                $("#level5_cat1").prop("checked", false);
                if (ind_hist) {
                    $("#indep_hist").prop("checked", true);
                } else {
                    $("#indep_hist").prop("checked", false);
                }
            } else if (category_1 == 2) {
                $("#level3_cat1").prop("checked", true);
                $("#level4_cat1").prop("checked", false);
                $("#level5_cat1").prop("checked", false);
            } else {
                $("#level3_cat1").prop("checked", true);
                if (cat2 > 0 || cat3 > 0) {
                    $("#level5_cat1").prop("checked", true);
                    $("#level4_cat1").prop("checked", false);
                } else {
                    $("#level4_cat1").prop("checked", true);
                    $("#level5_cat1").prop("checked", false);
                }
            }
            if (cat2 > 0) {
                if (category_1 > 2 || cat3 > 0) {
                    $("#level5_cat2").prop("checked", true);
                    $("#level4_cat2").prop("checked", false);
                } else {
                    $("#level4_cat2").prop("checked", true);
                    $("#level5_cat2").prop("checked", false);
                }
            } else {
                $("#level5_cat2").prop("checked", false);
                $("#level4_cat2").prop("checked", false);
            }
            if (cat3 > 0) {
                if (category_1 > 2 || cat3 > 0) {
                    $("#level5_cat3").prop("checked", true);
                    $("#level4_cat3").prop("checked", false);
                } else {
                    $("#level4_cat3").prop("checked", true);
                    $("#level5_cat3").prop("checked", false);
                }
            } else {
                $("#level5_cat3").prop("checked", false);
                $("#level4_cat3").prop("checked", false);
            }
        }
        get_level('category_a');
        get_level('category_b');
        get_level('category_c');
    }

    function clear_section(class_name) {
        $(document).ready(function () {
            let c = "." + class_name;
            $(c).find(':input').each(function () {
                $(this).prop('checked', false)
            });
            overall_level();
        })
    }

    function clear_form() {
        $(document).ready(function () {
            $("*").find(':input').each(function () {
                $(this).prop('checked', false)
            });
            overall_level();
        })
    }

    function overall_level() {
        try {
            let levels = [];
            let problem_level = document.querySelector('input[name="problem_level"]:checked').value;
            let risk_level = document.querySelector('input[name="risk_level"]:checked').value;
            let data_level = document.querySelector('input[name="data_level"]:checked').value;
            levels.push(problem_level);
            levels.push(risk_level);
            levels.push(data_level);
            levels.sort();
            console.log(levels[1]);
            document.getElementById("overallLevel").innerHTML = "Level: " + levels[1];
        } catch (e) {
            document.getElementById("overallLevel").innerHTML = "Level: ???";
        }
    }
</script>

</html>
